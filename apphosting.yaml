runConfig:
  minInstances: 1
  maxInstances: 5
  concurrency: 80 # Number of concurrent requests a single instance can handle
  cpu: 1 # Number of CPU cores
  memoryMiB: 512 # Memory allocated per instance (in MiB)

env:
  # Existing GenAI secret. The 'secret' name MUST be in UPPER_SNAKE_CASE
  # when referenced from Google Cloud Secret Manager.
  - variable: google_api_key # This is the environment variable name your code uses (process.env.google_api_key)
    secret: GENAI_API_KEY    # <--- UPDATED: This is the name of the secret in Secret Manager (UPPER_SNAKE_CASE)
    availability:
      - BUILD
      - RUNTIME

  # Add Firebase environment variables below
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    value: "AIzaSyBKm9xhWBogV4Muk3d70rn6_-lo73T2irw"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    value: "navael.firebaseapp.com"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    value: "navael"
    availability:
      - BUILD
      - RUNTIME

  # Corrected Firebase Storage bucket name!
  # Firebase storage buckets end with .appspot.com, not .firebasestorage.app
  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    value: "navael.appspot.com" # <--- This is the key change here!
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    value: "36160001734"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    value: "1:36160001734:web:ee096485297757ec1c29c7"
    availability:
      - BUILD
      - RUNTIME

  - variable: SERVICE_ACCOUNT_KEY
    secret: service_account_key
    availability:
      - BUILD
      - RUNTIME
